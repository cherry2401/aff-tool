<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>Link Replacer - T√°ch & G·ªôp Link</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
    body{font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;padding:12px;padding-bottom:80px}
    .container{max-width:800px;margin:0 auto}
    .header{background:white;border-radius:16px;padding:20px;margin-bottom:16px;box-shadow:0 8px 24px rgba(0,0,0,.15);text-align:center}
    .header h1{color:#667eea;font-size:clamp(18px,5vw,24px);margin-bottom:8px}
    .header p{color:#718096;font-size:13px}
    .section{background:white;border-radius:16px;padding:16px;margin-bottom:12px;box-shadow:0 4px 12px rgba(0,0,0,.1)}
    .section-header{display:flex;align-items:center;gap:10px;margin-bottom:12px;padding:12px;border-radius:12px;color:white;font-weight:bold;font-size:14px;background:linear-gradient(135deg,#667eea,#764ba2)}
    .buttons{display:flex;gap:8px;flex-wrap:wrap}
    .btn{appearance:none;border:0;border-radius:10px;padding:10px 14px;font-weight:600;color:#fff;background:#667eea;cursor:pointer;display:inline-flex;align-items:center;gap:8px;text-decoration:none}
    .btn.secondary{background:#764ba2}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    textarea.input, .mono{width:100%;min-height:120px;border:1px solid #e2e8f0;border-radius:12px;padding:12px}
    .links-display, .result-display{white-space:pre-wrap;border:1px dashed #e2e8f0;border-radius:12px;padding:12px}
    .inline-actions{display:flex;gap:8px;align-items:center}
  </style>
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>Link Replacer - T√°ch & G·ªôp Link</h1>
      <p>C√¥ng c·ª• t√°ch link, thay th·∫ø link v√† g·ªôp link nhanh ch√≥ng.</p>
    </header>

    <section class="section">
      <div class="section-header">B∆∞·ªõc 1: T√°ch link</div>
      <textarea id="originalText" class="input" placeholder="D√°n n·ªôi dung ch·ª©a link v√†o ƒë√¢y..."></textarea>
      <div class="inline-actions" style="margin-top:10px">
        <button class="btn" id="extractBtn" onclick="extractLinks()">T√°ch Link</button>
        <button class="btn secondary" id="copyLinksBtn" onclick="copyLinks()">Copy T·∫•t C·∫£ Link</button>
        <a class="btn secondary" id="shopeeBtn" href="https://s.shopee.vn/7V7cEveG0o" target="_blank" rel="noopener">Chuy·ªÉn ƒê·ªïi Shopee</a>
      </div>
      <div id="linksCount" style="margin-top:10px;font-weight:600;color:#4a5568">Link ƒê√£ T√°ch (0)</div>
      <div id="linksDisplay" class="links-display empty" style="margin-top:8px">Ch∆∞a c√≥ link n√†o ƒë∆∞·ª£c t√°ch</div>
    </section>

    <section class="section">
      <div class="section-header">B∆∞·ªõc 2: Thay th·∫ø link</div>
      <textarea id="newLinksText" class="input mono" placeholder="D√°n danh s√°ch link m·ªõi (m·ªói d√≤ng m·ªôt link)..."></textarea>
      <div class="buttons" style="margin-top:10px">
        <button class="btn" id="replaceBtn" onclick="replaceLinks()" disabled>Thay Th·∫ø Link</button>
        <button class="btn secondary" id="copyResultBtn" onclick="copyResult()" disabled>Copy K·∫øt Qu·∫£</button>
        <button class="btn" onclick="resetAll()">L√†m M·ªõi</button>
      </div>
      <div id="resultDisplay" class="result-display empty" style="margin-top:8px">K·∫øt qu·∫£ s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y</div>
    </section>
  </div>

  <script>
    let extractedLinks = [];

    function showToast(msg){
      console.log(msg);
    }

    function extractLinks(){
      const text = document.getElementById('originalText').value;
      const urlRegex = /(https?:\/\/[^\s\)]+)/gi;
      extractedLinks = (text.match(urlRegex) || []).map(u => u.trim());
      const linksDisplay = document.getElementById('linksDisplay');
      const count = document.getElementById('linksCount');
      if(extractedLinks.length){
        linksDisplay.className = 'links-display';
        linksDisplay.textContent = extractedLinks.join('\n');
        count.textContent = `Link ƒê√£ T√°ch (${extractedLinks.length})`;
        document.getElementById('copyLinksBtn').disabled = false;
        document.getElementById('replaceBtn').disabled = false;
        showToast('‚úÖ ƒê√£ t√°ch link');
      }else{
        linksDisplay.className = 'links-display empty';
        linksDisplay.textContent = 'Ch∆∞a c√≥ link n√†o ƒë∆∞·ª£c t√°ch';
        count.textContent = 'Link ƒê√£ T√°ch (0)';
        document.getElementById('copyLinksBtn').disabled = true;
        document.getElementById('replaceBtn').disabled = true;
        showToast('‚ö†Ô∏è Kh√¥ng t√¨m th·∫•y link');
      }
    }

    function copyLinks(){
      const links = extractedLinks.join('\n');
      if(!links){ showToast('‚ùå Kh√¥ng c√≥ link ƒë·ªÉ copy'); return; }
      navigator.clipboard.writeText(links).then(()=> showToast('‚úÖ ƒê√£ copy t·∫•t c·∫£ link')).catch(()=> showToast('‚ùå L·ªói copy'));
    }

    function replaceLinks(){
      const originalText = document.getElementById('originalText').value;
      const newLinksText = document.getElementById('newLinksText').value;
      if(!originalText.trim() || !newLinksText.trim()){ showToast('‚ö†Ô∏è Thi·∫øu n·ªôi dung'); return; }
      const urlRegex = /(https?:\/\/[^\s\)]+)/gi;
      const newLinks = (newLinksText.match(urlRegex) || []).map(u => u.trim());
      if(newLinks.length !== extractedLinks.length){ showToast(`‚ùå C·∫ßn ${extractedLinks.length} link m·ªõi`); return; }
      let result = originalText;
      extractedLinks.forEach((oldLink, i)=>{ result = result.replace(oldLink, newLinks[i]); });
      const resultDisplay = document.getElementById('resultDisplay');
      resultDisplay.className = 'result-display';
      resultDisplay.textContent = result;
      document.getElementById('copyResultBtn').disabled = false;
      showToast('‚úÖ ƒê√£ thay th·∫ø link');
    }

    function copyResult(){
      const result = document.getElementById('resultDisplay').textContent;
      if(result && result !== 'K·∫øt qu·∫£ s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y'){
        navigator.clipboard.writeText(result).then(()=> showToast('‚úÖ ƒê√£ copy k·∫øt qu·∫£')).catch(()=> showToast('‚ùå L·ªói copy'));
      }
    }

    function resetAll(){
      document.getElementById('originalText').value = '';
      document.getElementById('newLinksText').value = '';
      const linksDisplay = document.getElementById('linksDisplay');
      linksDisplay.className = 'links-display empty';
      linksDisplay.textContent = 'Ch∆∞a c√≥ link n√†o ƒë∆∞·ª£c t√°ch';
      const resultDisplay = document.getElementById('resultDisplay');
      resultDisplay.className = 'result-display empty';
      resultDisplay.textContent = 'K·∫øt qu·∫£ s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y';
      document.getElementById('linksCount').textContent = 'Link ƒê√£ T√°ch (0)';
      document.getElementById('copyLinksBtn').disabled = true;
      document.getElementById('replaceBtn').disabled = true;
      document.getElementById('copyResultBtn').disabled = true;
      extractedLinks = [];
      showToast('üîÑ ƒê√£ l√†m m·ªõi');
    }

    // Prevent zoom on double tap (iOS)
    let lastTouchEnd = 0;
    document.addEventListener('touchend', function(event){
      const now = Date.now();
      if(now - lastTouchEnd <= 300){ event.preventDefault(); }
      lastTouchEnd = now;
    }, false);
  </script>
</body>
</html>
